version: "3.7"
services:
    maven:
        image: maven:3-openjdk-8-slim
        container_name: maven
        working_dir: /app
        volumes:
            - ./:/app
            - ~/.m2:/root/.m2
            - ~/.aws/credentials:/root/.aws/credentials:ro
        command: mvn clean package

    webcrawler:
        image: ${ECR_IMAGE_URL}
        ports:
        -   5000:5000
        build:
            context: .
            dockerfile: Dockerfile
        env_file:
            -   .env
